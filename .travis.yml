---
dist: bionic
sudo: required
group: edge
services: docker
language: python
python: 3.8
env:
  - SCENARIO=allinone-ubuntu2004
  - SCENARIO=allinone-centos8
  - SCENARIO=allinone-ubuntu1804
  - SCENARIO=allinone-mysql-ubuntu2004
  - SCENARIO=allinone-mysql-centos8
  - SCENARIO=allinone-mysql-ubuntu1804
  - SCENARIO=twoinone-ubuntu2004
  - SCENARIO=twoinone-centos8
  - SCENARIO=twoinone-ubuntu1804
  - SCENARIO=archiveinterface-ubuntu2004
  - SCENARIO=archiveinterface-centos8
  - SCENARIO=archiveinterface-ubuntu1804
  - SCENARIO=core-ubuntu2004
  - SCENARIO=core-centos8
  - SCENARIO=core-ubuntu1804
  - SCENARIO=default-ubuntu2004
  - SCENARIO=default-centos8
  - SCENARIO=default-ubuntu1804
  - SCENARIO=in-ubuntu2004
  - SCENARIO=in-centos8
  - SCENARIO=in-ubuntu1804
  - SCENARIO=notify-ubuntu2004
  - SCENARIO=notify-centos8
  - SCENARIO=notify-ubuntu1804
  - SCENARIO=out-ubuntu2004
  - SCENARIO=out-centos8
  - SCENARIO=out-ubuntu1804
install: pip install ansible molecule docker pre-commit pylint pep257 yamllint ansible-lint pytest testinfra
script:
  - pushd .. && ln -s ansible-pacifica pacifica.ansible_pacifica && popd
  - python molecule/gen_scenarios.py
  - molecule test -s $SCENARIO
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
